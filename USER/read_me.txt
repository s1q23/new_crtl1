说明：
主控板的程序代码
基于STM32F407IGT的MCU
整个程序运行在ucosiii上，

一、需求
1.uart5接收上位机的指令，执行相应任务；
2.uart5定时向上位机发送全状态信息，1s一次；
3.usart3接收遥控器的指令，执行相应动作，且遥控器控制的优先级比上位机高；
4.usart2、usart4读取超声波模块数据；
5.usart1接485通讯，外接CO，PM等传感器？；
6.IIC读取加速区传感器；
7.CAN控制伺服驱动器；
8.一路步进电机；
9.模拟输入n路，开DMA采样；
10.数字输入，查询防撞条信息，并口读取角度传感器；
11.数字输出，控制各路灯的开关；
12.SPI网卡；


二、任务分配
1.usart5数据处理任务
	接收使用DMA,开启idle中断，在中断中发送接收完成信号，在任务中处理
2.定时通过usart5向上位机发送全状态信息 1s一次
	发送使用DMA
3.防撞条处理
	等待信号量，去抖，做紧急停车处理
4.超声波任务两个，分别处理前后超声波模块上传的数据
	利用串口IDLE中断通知应用程序读取相应数据
5.串口3读取RF433遥控器下发的命令
	利用串口IDLE中断通知任务，执行相应命令
6.定时器任务
	定时读取伺服驱动器的状态和数据
7.开若干定时器任务，需要闪烁灯光的时候使用
	
三、基本外设
1.串口6路
	a.usart5和PC通讯
		PC下发的指令只需要处理，不需要回复，开个队列存放
		下位机每1S上报一次状态
	b.usart3和433MHz模块通讯
		同样只接收，不回复，遥控器的优先级高于其他控制
	//c.和GPS模块通讯
	d.usart2、usart4两路超声波模块
		应该需要查询数据
	e.usart1一路485
	f.usart6 debug口，开一路shell调试用
2.GPIO
	
3.ADC采样
	a.寻迹传感器 5路
	b.温湿度等其他传感器
4.CAN一路
	和伺服电机通信
5.SPI 网卡
	
6.9位并口输入
	a.角度传感器
	
7.外部中断
	a.防撞条
	b.编码器

8.驱动器驱动步进电机一个
	a.pwm一路
	b.数字输出两路（使能和方向）
结构说明


四、通讯负荷简单计算，统计周期1S
遥控器50个数据，超声波25个数据
Can 10个数据，Pm2.5 10个数据，工控机5个数据

Can 发送一个数据包的时间0.2ms，很短；工控机的全状态27ms，必须使用DMA